[gd_scene load_steps=11 format=4 uid="uid://b8u0ahaefij7v"]

[ext_resource type="PackedScene" uid="uid://dmlwbymobhm0b" path="res://godot4/debug/TestChamber.tscn" id="1_2u2gc"]
[ext_resource type="PackedScene" uid="uid://cek3r1l5uiek1" path="res://godot4/arena/managers/ScoreManager.tscn" id="2_0wabn"]
[ext_resource type="PackedScene" uid="uid://ck7ir4e3p2vwi" path="res://godot4/arena/managers/MessageManager.tscn" id="3_egrwn"]
[ext_resource type="PackedScene" uid="uid://bl82ubt1dg33d" path="res://godot4/elements/blocks/Block.tscn" id="5_hmpgd"]
[ext_resource type="PackedScene" uid="uid://cgjeqx4n1ot0e" path="res://godot4/actors/ships/Ship.tscn" id="6_5mryg"]
[ext_resource type="Texture2D" uid="uid://c0idcfpngkmbe" path="res://assets/sprites/planet.png" id="6_ll5gd"]

[sub_resource type="GDScript" id="GDScript_0rj7w"]
script/source = "extends SOLog


func _ready():
	super._ready()
	Events.sth_collected.connect(_on_sth_collected)
	
func _on_sth_collected(collector, collectee):
	log_line(\"[b]%s[/b] collected [b]%s[/b]\" % [collector.name, collectee.name])
"

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_t1641"]
texture = ExtResource("6_ll5gd")
texture_region_size = Vector2i(200, 200)
0:0/0 = 0
1:0/0 = 0
0:1/0 = 0
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-100, -100, 100, -100, 100, 100, -100, 100)

[sub_resource type="TileSet" id="TileSet_t1641"]
tile_size = Vector2i(200, 200)
physics_layer_0/collision_layer = 16
physics_layer_0/collision_mask = 0
sources/3 = SubResource("TileSetAtlasSource_t1641")

[sub_resource type="GDScript" id="GDScript_ll5gd"]
script/source = "extends TileMapLayer


func _on_fall_timer_timeout() -> void:
	
"

[node name="TestChamber" instance=ExtResource("1_2u2gc")]

[node name="FPSCounter" parent="." index="3"]
modulate = Color(0.541176, 0.768627, 1, 1)

[node name="TestChamberLog" parent="." index="5"]
script = SubResource("GDScript_0rj7w")

[node name="ScoreManager" parent="." index="6" instance=ExtResource("2_0wabn")]
teams = Array[String](["P1"])

[node name="MessageManager" parent="." index="7" node_paths=PackedStringArray("battlefield") instance=ExtResource("3_egrwn")]
battlefield = NodePath("..")

[node name="Ship" parent="." index="8" instance=ExtResource("6_5mryg")]
unique_name_in_owner = true
position = Vector2(-800, 0)

[node name="Block" parent="." index="11" instance=ExtResource("5_hmpgd")]
position = Vector2(0, -1200)

[node name="Block2" parent="." index="12" instance=ExtResource("5_hmpgd")]

[node name="TileMapLayer" type="TileMapLayer" parent="." index="13"]
tile_map_data = PackedByteArray("AAD//wUAAwABAAEAAAD+/wUAAwABAAEAAAD9/wUAAwABAAEAAAD8/wUAAwABAAEAAAD7/wUAAwABAAEAAAD6/wUAAwABAAEAAAAAAAUAAwABAAEAAAABAAUAAwABAAEAAAACAAUAAwABAAEAAAADAAUAAwABAAEAAAAEAAUAAwABAAEAAAAFAAUAAwABAAEAAAAGAAUAAwABAAEAAAA=")
tile_set = SubResource("TileSet_t1641")

[node name="BlockG1" type="TileMapLayer" parent="." index="14"]
tile_map_data = PackedByteArray("AAADAAAAAwABAAEAAAADAP//AwABAAEAAAAEAP//AwABAAEAAAA=")
tile_set = SubResource("TileSet_t1641")
script = SubResource("GDScript_ll5gd")

[node name="FallTimer" type="Timer" parent="BlockG1" index="0"]
wait_time = 2.0
autostart = true

[connection signal="timeout" from="BlockG1/FallTimer" to="BlockG1" method="_on_fall_timer_timeout"]
